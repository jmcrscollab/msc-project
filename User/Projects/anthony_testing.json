{
  "all_procs": {
    "procedure_1.csv": "item,phasetype,max_time,text,shuffle_1,survey,\r\n2,survey,user,This is the start of a new experiment.,off,autism_quotient.csv,"
  },
  "conditions": "name,notes,stimuli,procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,scripts,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,,",
  "all_stims": {
    "stimuli_1.csv": "cue,answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"
  },
  "public_key": "jEfdMOI6qnw/CnAruzv2Ziy409nVIOShUPRiO+5EHhc=",
  "surveys": {
    "social_media_disorder.csv": [
      [
        "item_name",
        "text",
        "type",
        "answers",
        "values",
        "score:social_media_disorder",
        "score:platforms",
        "score:wake_up_time",
        "optional",
        "btn_width",
        "original value",
        "other",
        ""
      ],
      [
        "Instructions1",
        "<span style='color:#006699'><span style='font-size:20px'>Please answer these questions about your social media use: </span></span><br>",
        "instruct",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "sm1",
        "Which of the following social media platforms do you regularly visit?",
        "checkbox",
        "Facebook|Instagram|Snapchat|Tiktok|Twitter|None",
        "1|2|3|4|5|6",
        "",
        "1",
        "",
        "No",
        "",
        "",
        "yes",
        ""
      ],
      [
        "sm2",
        "Which of the following social media platforms do you regularly upload content to?",
        "checkbox",
        "Facebook|Instagram|Snapchat|Tiktok|Twitter|None",
        "1|2|3|4|5|6",
        "",
        "1",
        "",
        "No",
        "",
        "",
        "yes",
        ""
      ],
      [
        "Instructions2",
        "<span style='color:#006699'><span style='font-size:20px'>During the past year, have you … </span></span>",
        "instruct",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "recoded1",
        "… regularly neglected other activities (e.g. hobbies, sport) because you wanted to use social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn24",
        "",
        ""
      ],
      [
        "recoded2",
        "… often found it difficult not to look at messages on social media when you were doing something else (e.g. school work)?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn1",
        "",
        ""
      ],
      [
        "recoded3",
        "… often used social media so you didn't have to think about unpleasant things?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn14",
        "",
        ""
      ],
      [
        "recoded4",
        "… often felt tense or restless if you weren't able to look at your messages on social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn7",
        "",
        ""
      ],
      [
        "recoded5",
        "… tried to spend less time on social media, but failed?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn11",
        "",
        ""
      ],
      [
        "recoded6",
        "… felt the need to check messages on social media more and more often?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn5",
        "",
        ""
      ],
      [
        "recoded7",
        "… tried to reduce your use of social media, but failed?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn10",
        "",
        ""
      ],
      [
        "recoded8",
        "… often sat waiting until something happens on social media again?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn3",
        "",
        ""
      ],
      [
        "recoded9",
        "… regularly lied to your parents or friends about the amount of time you spend on social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn19",
        "",
        ""
      ],
      [
        "recoded10",
        "… regularly felt angry or frustrated if you weren't able to use social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn8",
        "",
        ""
      ],
      [
        "recoded11",
        "… often used social media secretly?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn21",
        "",
        ""
      ],
      [
        "recoded12",
        "… been unable to stop using social media, even though others told you that you really should?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn12",
        "",
        ""
      ],
      [
        "recoded13",
        "… regularly had no interest in hobbies or other activities because you would rather use social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn23",
        "",
        ""
      ],
      [
        "recoded14",
        "… often felt bad when you could not use social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn9",
        "",
        ""
      ],
      [
        "recoded15",
        "… often used social media to escape from negative feelings?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn15",
        "",
        ""
      ],
      [
        "recoded16",
        "… had serious conflict with your parent(s) and sibling(s) because of your social media use?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn26",
        "",
        ""
      ],
      [
        "recoded17",
        "… had serious problems at school or at work because you were spending too much time on social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn25",
        "",
        ""
      ],
      [
        "recoded18",
        "… regularly found that you can't think of anything else but the moment that you will be able to use social media again?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn2",
        "",
        ""
      ],
      [
        "recoded19",
        "… regularly had arguments with others because of your social media use?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn18",
        "",
        ""
      ],
      [
        "recoded20",
        "…jeopardised or lost an important friendship or relationship because you were spending too much time on social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn27",
        "",
        ""
      ],
      [
        "recoded21",
        "… regularly felt dissatisfied because you wanted to spend more time on social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn6",
        "",
        ""
      ],
      [
        "recoded22",
        "… regularly used social media to take your mind off your problems?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn13",
        "",
        ""
      ],
      [
        "recoded23",
        "… regularly not had enough sleep because you were using social media too late at night?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn17",
        "",
        ""
      ],
      [
        "recoded24",
        "… regularly devoted no attention to people around you (e.g. family or friends) because you were using social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn22",
        "",
        ""
      ],
      [
        "recoded25",
        "… felt the need to use social media more and more often?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn4",
        "",
        ""
      ],
      [
        "recoded26",
        "… regularly hidden your social media use from others?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn20",
        "",
        ""
      ],
      [
        "recoded27",
        "… often not paid attention at school, while doing homework or at work because you were using social media?",
        "likert",
        "Yes|No",
        "1|0",
        "1",
        "",
        "",
        "No",
        "100px",
        "sn16",
        "",
        ""
      ],
      [
        "recoded28",
        "How long after you wake up do you check social media? Please enter an answer in MINUTES. <br> If you do NOT use social media on a daily basis, please enter 10000",
        "number",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "",
        "sn28",
        "",
        ""
      ],
      [
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ],
    "autism_quotient.csv": [
      [
        "item_name",
        "text",
        "Type",
        "Answers",
        "Values",
        "Score: AQ_Test",
        "Score: Social_Skill",
        "Score: Attention_switching",
        "Score: Communication",
        "Score: Imagination",
        "Score: Attention_to_detail",
        "Optional",
        "btn_width",
        "reversed"
      ],
      [
        "Instructions1",
        "<span style='color:#006699'><span style='font-size:20px'>Choose one response that best describes how strongly each item applies to you:</span></span>",
        "Instruct",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "AQ1",
        "I prefer to do things with others rather than on my own.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ2",
        "I prefer to do things the same way over and over again.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ3",
        "If I try to imagine something, I find it very easy to create a picture in my mind.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ4",
        "I frequently get so strongly absorbed in one thing that I lose sight of other things.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ5",
        "I often notice small sounds when others do not.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ6",
        "I usually notice car number plates or similar strings of information.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ7",
        "Other people frequently tell me that what I've said is impolite, even though I think it is polite.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ8",
        "When I'm reading a story, I can easily imagine what the characters might look like.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ9",
        "I am fascinated by dates.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ10",
        "In a social group, I can easily keep track of several different people's conversations.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ11",
        "I find social situations easy.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ12",
        "I tend to notice details that others do not.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ13",
        "I would rather go to a library than a party.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ14",
        "I find making up stories easy.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ15",
        "I find myself drawn more strongly to people than to things.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ16",
        "I tend to have very strong interests which I get upset about if I can't pursue.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ17",
        "I enjoy social chit-chat.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ18",
        "When I talk, it isn't always easy for others to get a word in edgeways.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ19",
        "I am fascinated by numbers.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ20",
        "When I'm reading a story, I find it difficult to work out the characters' intentions.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ21",
        "I don't particularly enjoy reading fiction.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ22",
        "I find it hard to make new friends.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ23",
        "I notice patterns in things all the time.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ24",
        "I would rather go to the theatre than a museum.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ25",
        "It does not upset me if my daily routine is disturbed.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ26",
        "I frequently find that I don't know how to keep a conversation going.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ27",
        "I find it easy to 'read between the lines' when someone is talking to me.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ28",
        "I usually concentrate more on the whole picture, rather than the small details.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "",
        "r1",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ29",
        "I am not very good at remembering phone numbers.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "",
        "r1",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ30",
        "I don't usually notice small changes in a situation, or a person's appearance.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "",
        "r1",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ31",
        "I know how to tell if someone listening to me is getting bored.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ32",
        "I find it easy to do more than one thing at once.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ33",
        "When I talk on the phone, I'm not sure when it's my turn to speak.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ34",
        "I enjoy doing things spontaneously.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ35",
        "I am often the last to understand the point of a joke.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ36",
        "I find it easy to work out what someone is thinking or feeling just by looking at their face.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ37",
        "If there is an interruption, I can switch back to what I was doing very quickly.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ38",
        "I am good at social chit-chat.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ39",
        "People often tell me that I keep going on and on about the same thing.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ40",
        "When I was young, I used to enjoy playing games involving pretending with other children.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ41",
        "I like to collect information about categories of things (e.g. types of car, types of bird, types of train, types of plant, etc.).",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ42",
        "I find it difficult to imagine what it would be like to be someone else.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ43",
        "I like to plan any activities I participate in carefully.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ44",
        "I enjoy social occasions.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ45",
        "I find it difficult to work out people's intentions.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ46",
        "New situations make me anxious.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "1",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        "no"
      ],
      [
        "AQ47",
        "I enjoy meeting new people.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ48",
        "I am a good diplomat.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ49",
        "I am not very good at remembering people's date of birth.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "",
        "r1",
        "No",
        "100px",
        "yes"
      ],
      [
        "AQ50",
        "I find it very easy to play games with children that involve pretending.",
        "likert",
        "Definitely agree|Slightly agree|Slightly disagree|Definitely disagree",
        "1|1|0|0",
        "r1",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        "yes"
      ],
      [
        ""
      ]
    ]
  },
  "code": {
    "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten/Cat release (2019-2021) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Phase.submit()\">Proceed</button>\n  </div>\n</div>",
    "survey": "<!--\n  Author: Dr. Anthony Haffey\n\n  Collector: Cat/Kitten/Cat release\n  A program for running experiments on the web\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\n\n  This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License version 3 as published by the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU General Public License for more details.\n\n  You should have received a copy of the GNU General Public License\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\n\n  Kitten/Cat release (2019-2021) author: Dr. Anthony Haffey\n\n  (team@someopen.solutions)\n-->\n<style>\n  body {\n    background-color: #5f9ea0;\n    width: 100%;\n    height: 100%;\n  }\n  td {\n    padding: 10px;\n    vertical-align: top;\n  }\n\n  /*\n*\telements by id\n*/\n\n  #content {\n    width: 95%;\n  }\n  #proceed_button {\n    display: none;\n    float: right;\n  }\n  #survey_outline {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    height: 90%;\n    overflow: auto;\n    -webkit-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n    background-color: white;\n    min-width: 900px;\n    max-width: 9000px;\n    border-radius: 20px;\n    border-color: #006688;\n    border-style: solid;\n    border-width: 5px;\n    padding: 10px;\n    box-shadow: 12px 12px 12px rgba(0, 0, 0, 0.5);\n  }\n  #survey_tabs {\n    padding: 20px;\n  }\n  #this_survey_id {\n    padding: 20px;\n    display: none;\n  }\n\n  /*\n*\telements by class\n*/\n  .feedback_span_multiple {\n    display: none;\n    margin: 10px;\n  }\n  .feedback_span_single {\n    display: none;\n    padding: 10px;\n  }\n  .likert_table td {\n    padding: 1px;\n    text-align: center;\n  }\n  .likert_table td:hover {\n    color: blue;\n  }\n  .score_total {\n    display: none;\n  }\n  .show_tab {\n    margin: 5px;\n  }\n  .survey_btn {\n    white-space: normal;\n    word-wrap: initial;\n  }\n  .table_break {\n    width: 100%;\n    height: 300px;\n    overflow: auto;\n  }\n\n  /*\n* by Bora Alp Arat at https://stackoverflow.com/questions/21684101/css-vertical-scrollbar-padding-left-right-in-ul-possible\n*/\n  ::-webkit-scrollbar {\n    width: 14px;\n    height: 18px;\n  }\n  ::-webkit-scrollbar-thumb {\n    height: 6px;\n    border: 4px solid rgba(0, 0, 0, 0);\n    background-clip: padding-box;\n    -webkit-border-radius: 7px;\n    background-color: rgba(0, 102, 153, 0.5);\n    -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05),\n      inset 1px 1px 0px rgba(0, 0, 0, 0.05);\n  }\n  ::-webkit-scrollbar-button {\n    width: 0;\n    height: 0;\n    display: none;\n  }\n  ::-webkit-scrollbar-corner {\n    background-color: transparent;\n  }\n</style>\n<div id=\"everything\">\n  <div id=\"survey_outline\"></div>\n</div>\n<span id=\"scales_span\"></span>\n<script>\n  /*\n   * Retrieving settings\n   */\n\n  if (typeof settings !== \"undefined\") {\n    settings = [settings];\n  } else {\n    settings = {};\n  }\n\n  /*\n   * vertical vs. horizontal tabs\n   */\n\n  if (\n    typeof settings.tab_hor_vert == \"undefined\" ||\n    settings.tab_hor_vert.toLowerCase() == \"horizontal\"\n  ) {\n    settings.tab_hor_vert = \"horizontal\";\n\n    $(\"#survey_outline\")\n      .append(\n        $(\"<div>\").attr(\"id\", \"please_wait_div\").html(\"Loading... Please wait\")\n      )\n      .append(\n        $(\"<div>\")\n          .addClass(\"needs-validation\")\n          .attr(\"id\", \"this_survey_id\")\n          .attr(\"novalidate\", true)\n      )\n      .append(\n        $(\"<div>\")\n          .attr(\"id\", \"survey_tabs\")\n          .addClass(\"border-top\")\n          .addClass(\"border-primary\")\n          .css(\"text-align\", \"right\")\n      )\n      .append(\n        $(\"<input>\")\n          .addClass(\"btn\")\n          .addClass(\"btn-primary\")\n          .attr(\"id\", \"proceed_button\")\n          .attr(\"type\", \"submit\")\n          .attr(\"value\", \"Proceed\")\n      );\n  } else if (settings.tab_hor_vert.toLowerCase() == \"vertical\") {\n    $(\"#survey_outline\").append(\n      $(\"<table>\").append(\n        $(\"<tr>\")\n          .append(\n            $(\"<td>\")\n              .prop(\"valign\", \"top\")\n              .addClass(\"border-right\")\n              .addClass(\"border-primary\")\n              .append($(\"<div>\").prop(\"id\", \"survey_tabs\"))\n          )\n          .append(\n            $(\"<td>\")\n              .append(\n                $(\"<div>\")\n                  .prop(\"id\", \"please_wait_div\")\n                  .html(\"Please wait while survey is downloading\")\n              )\n              .append(\n                $(\"<div>\")\n                  .prop(\"id\", \"this_survey_id\")\n                  .addClass(\"needs-validation\")\n                  .attr(\"novalidate\", true)\n              )\n              .append(\n                $(\"<input>\")\n                  .attr(\"type\", \"button\")\n                  .addclass(\"btn\")\n                  .addclass(\"btn-primary\")\n                  .prop(\"id\", \"proceed_button\")\n                  .val(\"Proceed\")\n              )\n          )\n      )\n    );\n  } else if (settings.tab_hor_vert.toLowerCase() == \"none\") {\n    $(\"#survey_outline\")\n      .append($(\"<div>\").css(\"display\", \"none\").prop(\"id\", \"survey_tabs\"))\n      .append(\n        $(\"<div>\")\n          .html(\"Please wait while survey is downloading\")\n          .prop(\"id\", \"please_wait_div\")\n      )\n      .append(\n        $(\"<div>\")\n          .class(\"needs-validation\")\n          .prop(\"id\", \"this_survey_id\")\n          .attr(\"novalidate\", true)\n      );\n  } else {\n    bootbox.alert(\n      \"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\"\n    );\n  }\n\n  /*\n   * Defining objects\n   */\n\n  page_break_management = {\n    breaks_remaining: 0,\n    breaks_index: 0,\n  };\n\n  proceed_object = {\n    type: [],\n    name: [],\n    break_no: [],\n  };\n\n  scoring_object = {\n    scales: [],\n    scale_scores: [],\n    update_scales: function (this_survey) {\n      headers = Object.keys(this_survey[0]);\n      this.scales = headers.filter((elm) => elm.includes(\"score:\"));\n      var scales_html = \"\";\n      this.scales.forEach(function (element) {\n        element = element.replace(\": \", \":\");\n        scales_html +=\n          \"<input name='\" +\n          element.replace(/ |:/g, \"_\") +\n          \"' class='score_total \" +\n          element.replace(/ |:/g, \"_\") +\n          \"' disabled>\";\n      });\n      $(\"#scales_span\").html(scales_html);\n    },\n  };\n\n  survey_obj = {};\n\n  /*\n   * Element actions\n   */\n\n  /*\n$(function() {\n  $( \".datepicker\" ).datepicker({\n    dateFormat : 'mm/dd/yy',\n    changeMonth : true,\n    changeYear : true,\n    yearRange: '-100y:c+nn',\n    maxDate: '-1d'\n  });\n});\n*/\n\n  $(\"#ExperimentContainer\").css(\"transform\", \"scale(1,1)\");\n\n  $(\"#proceed_button\").on(\"click\", function () {\n    var proceed = true;\n    var tabs = document.getElementsByClassName(\"show_tab active\");\n    if (tabs.length > 0) {\n      var current_tab = document\n        .getElementsByClassName(\"show_tab active\")[0]\n        .id.replace(\"_button\", \"\")\n        .replace(\"tab_\", \"\");\n      var response_elements = $(\"#table_\" + current_tab).find(\n        \".response_element\"\n      );\n    } else {\n      response_elements = $(\".table_break:visible\").find(\".response_element\");\n    }\n    for (var i = 0; i < response_elements.length; i++) {\n      [row_no, item_name] = retrieve_row_no_item_name(response_elements[i]);\n      if (typeof survey_obj.data[row_no].optional !== \"undefined\") {\n        var this_optional = survey_obj.data[row_no].optional.toLowerCase();\n\n        if (this_optional.indexOf(\"no\") !== -1) {\n          this_optional = this_optional.split(\"-\"); // find out whether there's a minimal number of responses\n          if (this_optional.length == 1) {\n            // default is that length needs to be at least 1\n            var min_resp_length = 1;\n          } else if (this_optional.length == 2) {\n            var min_resp_length = this_optional[1];\n          } else {\n            bootbox.alert(\n              \"Error - you appear to have too many '-' characters in the 'optional' column\"\n            );\n            return false;\n          }\n        } else {\n          min_resp_length = 0;\n        }\n\n        var quest_resp = isJSON($(\"#\" + response_elements[i].id).val());\n        if (quest_resp.length < min_resp_length) {\n          proceed = false;\n          $(\"#\" + response_elements[i].id.replace(\"response\", \"question\"))\n            .removeClass(\"text-dark\")\n            .removeClass(\"text-success\")\n            .addClass(\"text-danger\");\n        } else {\n          $(\"#\" + response_elements[i].id.replace(\"response\", \"question\"))\n            .removeClass(\"text-dark\")\n            .removeClass(\"text-danger\")\n            .addClass(\"text-success\");\n        }\n      }\n    }\n\n    if (current_tab == survey_obj.tabs && proceed) {\n      if (typeof sql_surveys == \"undefined\") {\n        var next_table_no =\n          parseFloat($(\".table_break:visible\")[0].id.replace(\"table\", \"\")) + 1;\n\n        if ($(\".table_break#table\" + next_table_no).length == 0) {\n          if (typeof Phase !== \"undefined\") {\n            Phase.submit();\n          } else {\n            bootbox.alert(\n              \"You've finished! Click on the preview button to restart.\"\n            );\n          }\n        } else {\n          $(\".table_break\").hide();\n          $(\".table_break#table\" + next_table_no).show();\n        }\n      } else {\n        $(\"#survey_outline\").append(\n          $(\"<h1>\").html(\"You have finished the preview of this survey.\")\n        );\n      }\n    } else if (current_tab < survey_obj.tabs && proceed) {\n      current_tab++;\n      $(\"#tab_\" + current_tab + \"_button\").removeClass(\"btn-secondary\");\n      $(\"#tab_\" + current_tab + \"_button\").removeClass(\"disabled\");\n      $(\"#tab_\" + current_tab + \"_button\").addClass(\"btn-outline-dark\");\n      $(\"#tab_\" + current_tab + \"_button\").click();\n    } else if (proceed == false) {\n      bootbox.alert(\n        \"You're missing some responses. Please fill in all the answers for the questions in red above.\"\n      );\n    } else if (current_tab > survey_obj.tabs) {\n      bootbox.alert(\n        \"Error - please contact Scientific Open Solutions about this problem, error 'Survey_001'.\"\n      );\n    }\n  });\n\n  //by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\n  String.prototype.replaceAll = function (str1, str2, ignore) {\n    return this.replace(\n      new RegExp(\n        str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g, \"\\\\$&\"),\n        ignore ? \"gi\" : \"g\"\n      ),\n      typeof str2 == \"string\" ? str2.replace(/\\$/g, \"$$$$\") : str2\n    );\n  };\n\n  /*\n   * Functions\n   */\n\n  function clean_item(this_item) {\n    if ((this_item.indexOf(\"'\") !== -1) | (this_item.indexOf('\"') !== -1)) {\n      bootbox.alert(\n        \"Please avoid apostraphes or quote marks in the responses the participant can give. These cause problems with smooth running of surveys. This occurs when you wrote:<br><br>\" +\n          this_item\n      );\n    }\n    return this_item;\n  }\n\n  function generate_feedback_string(\n    feedback_array,\n    this_index,\n    feedback_color,\n    row\n  ) {\n    if (feedback_array) {\n      if (feedback_array.length > 1) {\n        return $(\"<div>\")\n          .addClass(\n            \"feedback_span_multiple\" +\n              row[\"item_name\"].toLowerCase() +\n              \"_feedback\"\n          )\n          .html(feedback_array[this_index])[0].outerHTML;\n      } else {\n        return $(\"<div>\")\n          .addClass(\n            \"feedback_span_single \" +\n              row[\"item_name\"].toLowerCase() +\n              \"_feedback\"\n          )\n          .css(\"color\", feedback_color[this_index])\n          .html(feedback_array[this_index])[0].outerHTML;\n      }\n    } else {\n      return \"\";\n    }\n  }\n\n  function get_feedback(row) {\n    if (typeof row[\"feedback\"] !== \"undefined\" && row[\"feedback\"] !== \"\") {\n      feedback_array = row[\"feedback\"].split(\"|\");\n      if (typeof row[\"feedback_color\"] == \"undefined\") {\n        bootbox.alert(\n          \"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\"\n        );\n      }\n      feedback_color = row[\"feedback_color\"].split(\"|\");\n    } else {\n      feedback_array = null;\n      feedback_color = \"\";\n    }\n    return [feedback_array, feedback_color];\n  }\n\n  function isJSON(str) {\n    try {\n      return JSON.parse(str);\n    } catch (e) {\n      return str;\n    }\n  }\n\n  function likert_update(this_element) {\n    [row_no, item_name] = retrieve_row_no_item_name(this_element);\n    $(\".row_\" + row_no)\n      .removeClass(\"active\")\n      .removeClass(\"btn-primary\")\n      .addClass(\"btn-outline-primary\");\n    $(this_element).removeClass(\"btn-outline-primary\").addClass(\"btn-primary\");\n    $(\"#survey_\" + item_name + \"_response\").val(this_element.innerHTML);\n    $(\"#survey_\" + item_name + \"_value\").val(this_element.value);\n\n    response_check(this_element);\n  }\n\n  function load_survey(survey) {\n    /*\n     * are we in preview?\n     */\n    if (typeof parent.collector_survey_preview !== \"undefined\") {\n      survey_content = survey;\n    } else if (\n      typeof parent.master !== \"undefined\" &&\n      parent.master.surveys.preview\n    ) {\n      survey_content = survey;\n      survey_obj.mods = parent.master.mods;\n    } else {\n      survey = survey.toLowerCase().replace(\".csv\", \"\") + \".csv\";\n\n      if (\n        typeof parent.parent.project_json.surveys !== \"undefined\" &&\n        typeof parent.parent.project_json.surveys[survey] !== \"undefined\"\n      ) {\n        survey_content = parent.parent.project_json.surveys[survey];\n        survey_obj.mods = parent.parent.project_json.mods;\n      } else if (\n        typeof parent.parent.project_json.surveys !== \"undefined\" &&\n        typeof parent.parent.project_json.surveys[survey.replace(\".csv\", \"\")]\n      ) {\n        survey_content =\n          parent.parent.project_json.surveys[survey.replace(\".csv\", \"\")];\n        survey_obj.mods = parent.parent.project_json.mods;\n      } else {\n        bootbox.alert(\"Survey \" + survey + \" doesn't appear to exist\");\n      }\n    }\n    process_returned_questionnaire(survey_content);\n  }\n\n  function process_question(row, row_no) {\n    //row.values = row.values == \"\" ? row.answers : row.values;\n    if (row_check(\"page_break\", row)) {\n      page_break_management.breaks_remaining++;\n      question_td =\n        \"</tr></table><table id='table\" +\n        page_break_management.breaks_remaining +\n        \"' style='display:none' class='table_break'></tr>\";\n    } else {\n      if (\n        (typeof row[\"values\"] !== \"undefined\") &\n        (typeof row[\"values\"] !== \"function\")\n      ) {\n        //to address microsoft edge issue.\n        value_array = row[\"values\"].split(\"|\");\n      } else {\n        value_array = \"\";\n      }\n\n      if (row[\"item_name\"].indexOf(\" \") !== -1) {\n        bootbox.alert(\n          \"Please note that the 'item name' '\" +\n            row[\"item_name\"] +\n            \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\"\n        );\n      }\n\n      /*\n       * class for scoring\n       */\n\n      var this_class = \"\";\n      for (var i = 0; i < scoring_object.scales.length; i++) {\n        if (row[scoring_object.scales[i].toLowerCase()] == \"1\") {\n          this_class +=\n            scoring_object.scales[i]\n              .toLowerCase()\n              .replace(\"score: \", \"\")\n              .replace(/ |-/, \"\") + \" \";\n        }\n        if (row[scoring_object.scales[i].toLowerCase()] == \"r1\") {\n          this_class +=\n            scoring_object.scales[i]\n              .toLowerCase()\n              .replace(\"score: \", \"\")\n              .replace(\" \", \"_\") + \"-r1 \";\n        }\n      }\n\n      /*\n       * adding to row to help with \"write\" function\n       */\n      var row_x = JSON.parse(JSON.stringify(row));\n      row_x[\"row_no\"] = row_no;\n      row_x[\"this_class\"] = this_class;\n\n      [feedback_array, feedback_color] = get_feedback(row);\n\n      var survey_id = \"survey_\" + row[\"item_name\"].toLowerCase();\n\n      question_td =\n        $(\"<input>\")\n          .attr(\"type\", \"hidden\")\n          .addClass(\"response_element\")\n          .addClass(\"row_\" + row_no)\n          .prop(\"id\", survey_id + \"_response\")\n          .prop(\"name\", survey_id + \"_response\")\n          .val(\"\")[0].outerHTML +\n        $(\"<input>\")\n          .attr(\"type\", \"hidden\")\n          .prop(\"id\", survey_id + \"_value\")\n          .prop(\"name\", survey_id + \"_value\")\n          .val(\"\")[0].outerHTML;\n\n      /*\n       * Survey settings\n       */\n      [row_ques_perc, row_resp_perc] = row_perc(row[\"question_width\"]);\n\n      if (typeof settings.feedback_before_response == \"undefined\") {\n        settings.feedback_before_response = true;\n      }\n\n      if (typeof settings.lock_after_feedback == \"undefined\") {\n        settings.lock_after_feedback = false;\n      }\n\n      if (typeof row[\"type\"] == \"undefined\") {\n        return false;\n      }\n\n      if (\n        typeof survey_obj.mods !== \"undefined\" &&\n        typeof survey_obj.mods[row.type] !== \"undefined\"\n      ) {\n        var mod_html = survey_obj.mods[row.type].contents;\n\n        Object.keys(row).forEach(function (attribute) {\n          mod_html = mod_html.replaceAll(\n            \"{{\" + attribute + \"}}\",\n            row[attribute]\n          );\n        });\n        question_td += mod_html;\n      } else {\n        switch (row[\"type\"].toLowerCase()) {\n          case \"page_start\":\n            //var tabs_html = $(\"#survey_tabs\").html();\n            if (settings.tab_hor_vert == \"horizontal\") {\n              span_div = \"span\";\n            } else if (settings.tab_hor_vert == \"vertical\") {\n              span_div = \"div\";\n            }\n            if (typeof survey_obj.tabs == \"undefined\") {\n              survey_obj.tabs = 0;\n            } else {\n              survey_obj.tabs++;\n            }\n            if (survey_obj.tabs == 0) {\n              //i.e. is the first tab\n              active_button = \"btn-outline-primary active\";\n            } else {\n              active_button = \"btn-secondary disabled\";\n            }\n            if (settings.tab_hor_vert == \"vertical\") {\n              var vert_btn_block = \"btn-block\";\n            } else {\n              var vert_btn_block = \"\";\n            }\n            $(\"#survey_tabs\").append(\n              $(\"<\" + span_div + \">\")\n                .addClass(\"btn-group-toggle\")\n                .attr(\"data-toggle\", \"buttons\")\n                .append(\n                  $(\"<label>\")\n                    .addClass(\"btn\")\n                    .addClass(\"show_tab\")\n                    .html(row[\"text\"])\n                    .prop(\"id\", \"tab_\" + survey_obj.tabs + \"_button\")\n                    .append(\n                      $(\"<input>\")\n                        .attr(\"autocomplete\", \"off\")\n                        .attr(\"checked\", true)\n                        .attr(\"type\", \"checkbox\")\n                    )\n                )[0].outerHTML\n            );\n\n            page_break_indexes = [];\n            survey_obj.data.forEach(function (row, this_index) {\n              if (\n                typeof row.type !== \"undefined\" &&\n                row.type.toLowerCase() == \"page_start\"\n              ) {\n                page_break_indexes.push(this_index);\n              }\n            });\n\n            if (survey_obj.tabs > 0) {\n              question_td\n                .append(\n                  $(\"<div>\")\n                    .addClass(\"survey_page\")\n                    .css(\"display\", \"none\")\n                    .prop(\"id\", \"tab_\" + survey_obj.tabs)\n                )\n                .append(\n                  $(\"<table>\")\n                    .addClass(\"table_break\")\n                    .prop(\"id\", \"table_\" + survey_obj.tabs)\n                    .append(\"<tr>\")\n                );\n            } else {\n              question_td\n                .append(\n                  $(\"<div>\")\n                    .addClass(\"survey_page\")\n                    .prop(\"id\", \"tab_\" + survey_obj.tabs)\n                )\n                .append(\n                  $(\"<table>\")\n                    .addClass(\"table_break\")\n                    .prop(\"id\", \"table_\" + survey_obj.tabs)\n                    .append(\"<tr>\")\n                );\n            }\n            break;\n          case \"checkbox\":\n          case \"checkbox_vertical\":\n            question_td += write(\"checkbox_vertical\", row_x);\n            break;\n          case \"checkbox_horizontal\":\n            question_td += write(\"checkbox_horizontal\", row_x);\n            break;\n          case \"checkbox_single\":\n            question_td += write(\"checkbox_single\", row_x);\n            break;\n          case \"date\":\n            question_td += write(\"date\", row_x);\n            break;\n          case \"dropdown\":\n          case \"select\":\n            question_td += write(\"dropdown\", row_x);\n            break;\n          case \"email\":\n            question_td += write(\"email\", row_x);\n            break;\n          case \"google_slide\":\n          case \"jumbled\":\n          case \"instruct\":\n            // these are defined elsewhere to take the whole row\n            break;\n          case \"likert\":\n            question_td += write(\"likert\", row_x);\n            break;\n          case \"number\":\n            question_td += write(\"number\", row_x);\n            break;\n          case \"para\":\n            question_td += write(\"para\", row_x);\n            break;\n          case \"radio\":\n          case \"radio_vertical\":\n            question_td += write(\"radio_vertical\", row_x);\n            break;\n          case \"radio_horizontal\":\n            question_td += write(\"radio_horizontal\", row_x);\n            break;\n\n          case \"report_score\":\n            question_td.append(\n              $(\"<input>\")\n                .addClass(\"form-control\")\n                .addClass(\"score_\" + row[\"item_name\"])\n                .addClass(row[\"item_name\"] + \"_item\")\n                .addClass(\"row_\" + row_no)\n                .attr(\"disabled\", true)\n                .attr(\"type\", \"text\")\n                .prop(\"name\", \"survey_\" + row[\"item_name\"].toLowerCase())\n            );\n            break;\n\n          case \"text\":\n            question_td += write(\"text\", row_x);\n            break;\n        }\n      }\n      if (feedback_array) {\n        question_td.append(\n          $(\"<button>\")\n            .addClass(\"btn\")\n            .addClass(\"btn-outline-info\")\n            .addClass(\"feedback_btn\")\n            .addClass(row[\"item_name\"] + \"_item\")\n            .addClass(\"row_\" + row_no)\n            .html(\"Show\")\n            .on(\"click\", function () {\n              reveal_answers(this);\n            })\n            .prop(\n              \"id\",\n              \"reveal_\" + row[\"item_name\"].toLowerCase() + \"_feedback\"\n            )\n        );\n      }\n    }\n    if (typeof row[\"type\"] == \"undefined\") {\n      return \"\";\n    } else {\n      if (row[\"type\"].toLowerCase() == \"instruct\") {\n        row_html = write(\"instruct\", row);\n      } else if (row[\"type\"].toLowerCase() == \"jumbled\") {\n        //row_html  = question_td + write(\"jumbled\",row); <-- this is better, but being paused for placement work Anthony is doing\n        row_html = write(\"jumbled\", row);\n      } else if (row[\"type\"].toLowerCase() == \"likert\") {\n        if (\n          typeof row[\"side_by_side\"] !== \"undefined\" &&\n          row[\"side_by_side\"].toLowerCase() == \"yes\"\n        ) {\n          var row_html =\n            $(\"<td>\")\n              .addClass(\"text-primary\")\n              .css(\"text-align\", \"right\")\n              .css(\"width\", row_ques_perc)\n              .html(row[\"text\"])\n              .prop(\n                \"id\",\n                \"survey_\" +\n                  row[\"item_name\"].toLowerCase().replace(\" \", \"_\") +\n                  \"_question\"\n              )[0].outerHTML + $(\"<td>\").html(question_td)[0].outerHTML;\n        } else {\n          var row_html =\n            $(\"<tr>\").append($(\"<td>\").attr(\"colspan\", 2).html(row[\"text\"]))[0]\n              .outerHTML +\n            $(\"<tr>\").append(\n              $(\"<td>\")\n                .attr(\"colspan\", 2)\n                .attr(\"align\", \"center\")\n                .html(question_td)\n            )[0].outerHTML;\n        }\n      } else if (row[\"type\"].toLowerCase() == \"google_slide\") {\n        var row_html = $(\"<td>\")\n          .attr(\"colspan\", 2)\n          .html(row[\"text\"])[0].outerHTML;\n\n        //var row_html=\"<td colspan='2'>\"+row[\"text\"]+\"</label></td>\";\n      } else if (\n        typeof row[\"no_text\"] !== \"undefined\" &&\n        row[\"no_text\"] == \"on\"\n      ) {\n        var row_html = $(\"<td>\")\n          .attr(\"colspan\", 2)\n          .html(question_td)[0].outerHTML;\n\n        //var row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\n      } else {\n        if (\n          (row[\"text\"].toLowerCase() == \"page_start\") |\n          (row[\"type\"].toLowerCase() == \"page_start\")\n        ) {\n          row_html = question_td;\n        } else {\n          var row_html =\n            $(\"<td>\")\n              .addClass(\"text-primary\")\n              .css(\"text-align\", \"right\")\n              .css(\"width\", row_ques_perc)\n              .html(row[\"text\"])\n              .prop(\n                \"id\",\n                \"survey_\" +\n                  row[\"item_name\"].toLowerCase().replace(\" \", \"_\") +\n                  \"_question\"\n              )[0].outerHTML + $(\"<td>\").html(question_td)[0].outerHTML;\n        }\n      }\n      if (typeof row[\"optional\"] !== \"undefined\") {\n        if (row[\"optional\"].toLowerCase() == \"no\") {\n          proceed_object.name.push(row[\"item_name\"]);\n          proceed_object.type.push(row[\"type\"]);\n          proceed_object.break_no.push(page_break_management.breaks_remaining);\n        }\n      }\n      if (\n        typeof row[\"shuffle_question\"] == \"undefined\" ||\n        row[\"shuffle_question\"].toLowerCase() == \"off\"\n      ) {\n        this_shuffle = \"none\";\n      } else {\n        this_shuffle = row[\"shuffle_question\"];\n      }\n      return [row_html, this_shuffle];\n    }\n  }\n\n  function process_score(\n    row_no,\n    values_col,\n    this_response,\n    item,\n    values_reverse\n  ) {\n    item_values = survey_obj.data[row_no][values_col].split(\"|\");\n    if (typeof values_reverse !== \"undefined\" && values_reverse == \"r\") {\n      item_values.reverse();\n    }\n    item_answers = survey_obj.data[row_no][\"values\"].split(\"|\");\n    var this_value = item_values[item_answers.indexOf(this_response)];\n    $(\"#survey_\" + item + \"_score\").val(this_value);\n    if (typeof this_value !== \"undefined\") {\n      return parseFloat(this_value);\n    }\n  }\n\n  function process_returned_questionnaire(data) {\n    /*\n     * trim the data if it has a blank final row\n     */\n    if (data[data.length - 1].length < data[0].length) {\n      data.pop();\n    }\n\n    survey_obj.data = data;\n    survey_obj.data = Papa.unparse(survey_obj.data);\n    survey_obj.data = parent.parent.Collector.PapaParsed(survey_obj.data);\n\n    survey_obj.scales = {};\n    var col_headers = Object.keys(survey_obj.data[0]);\n    col_headers.forEach(function (header) {\n      if (header.indexOf(\"score:\") == 0) {\n        var original_header = header;\n        header = header.replace(\"score: \", \"\");\n        header = header.replace(\"score:\", \"\");\n        survey_obj.scales[header] = {};\n        survey_obj.scales[header].questions = {};\n\n        for (var i = 1; i < survey_obj.data.length; i++) {\n          row = survey_obj.data[i];\n          if (\n            row[original_header] !== \"\" &&\n            typeof row[original_header] !== \"undefined\"\n          ) {\n            survey_obj.scales[header].questions[i] = row[original_header];\n          }\n        }\n      }\n    });\n    write_survey(survey_obj.data, \"this_survey_id\");\n    $(\"#please_wait_div\").hide();\n    $(\"#proceed_button\").show();\n    $(\"html, body\").animate(\n      {\n        scrollTop: $(\"#survey_outline\").offset().top,\n      },\n      1000\n    );\n  }\n\n  function row_perc(this_rat) {\n    if (typeof this_rat == \"undefined\") {\n      row_resp_perc = \"50%\";\n      row_ques_perc = \"50%\";\n    } else {\n      row_resp_perc = parseFloat(100 - this_rat.replace(\"%\", \"\")) + \"%\";\n      row_ques_perc = parseFloat(this_rat.replace(\"%\", \"\")) + \"%\";\n    }\n    return [row_ques_perc, row_resp_perc];\n  }\n\n  function response_check(submitted_element) {\n    switch (submitted_element.type) {\n      case \"checkbox\":\n        var checked_responses = $(\n          \"[name='\" + submitted_element.name + \"']:checked\"\n        );\n        if (checked_responses.length) {\n          //i.e. more than 0\n          var values = [];\n          for (var i = 0; i < checked_responses.length; i++) {\n            values.push(checked_responses[i].value);\n          }\n          $(\"#\" + submitted_element.name + \"_response\").val(\n            JSON.stringify(values)\n          );\n        } else {\n          $(\"#\" + submitted_element.name + \"_response\").val(\"\");\n        }\n        break;\n\n      case \"button\":\n        $(\"#\" + submitted_element.name + \"_response\").val(\n          submitted_element.value\n        );\n        break;\n\n      case \"number\":\n      case \"radio\":\n      case \"select-one\":\n      case \"text\":\n      case \"textarea\":\n        $(\"#\" + submitted_element.name + \"_response\").val(\n          submitted_element.value\n        );\n        break;\n    }\n    update_score();\n  }\n\n  function retrieve_row_no_item_name(this_element) {\n    var these_classes = this_element.className.split(\" \");\n    var row_no;\n    var item_name;\n    these_classes.forEach(function (this_class) {\n      if (this_class.indexOf(\"row_\") > -1) {\n        row_no = this_class.replace(\"row_\", \"\");\n      }\n      if (this_class.indexOf(\"_item\") > -1) {\n        item_name = this_class.replace(\"_item\", \"\").toLowerCase();\n      }\n    });\n    return [row_no, item_name];\n  }\n\n  function reveal_answers(this_element) {\n    var this_response = $(\n      \"#\" +\n        this_element.id\n          .replace(\"reveal_\", \"survey_\")\n          .replace(\"_feedback\", \"_response\")\n    ).val();\n    response_present = this_response == \"\" ? false : true;\n\n    if (\n      settings.feedback_before_response == false &&\n      response_present == false\n    ) {\n      bootbox.alert(\"Please respond before trying reveal the feedback.\");\n    } else {\n      if ($(\"#\" + this_element.id).hasClass(\"btn-outline-info\")) {\n        $(\".\" + this_element.id.replace(\"reveal_\", \"\")).show(500);\n        if (settings.lock_after_feedback) {\n          var item_class = this_element.id\n            .replace(\"_feedback\", \"_item\")\n            .replace(\"reveal_\", \"\");\n          $(\".\" + item_class).prop(\"disabled\", true);\n          document.getElementsByClassName(item_class).title =\n            \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\n          $(\"#\" + this_element.id)\n            .addClass(\"btn-info\")\n            .removeClass(\"btn-outline-info\")\n            .html(\"Locked\");\n          document.getElementById(this_element.id).title =\n            \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\n          $(\"#\" + this_element.id).addClass(\"disabled\");\n        } else {\n          $(\"#\" + this_element.id)\n            .html(\"Hide\")\n            .removeClass(\"btn-outline-info\")\n            .addClass(\"btn-info\");\n        }\n      } else {\n        $(\".\" + this_element.id.replace(\"reveal_\", \"\")).hide(500);\n        $(\"#\" + this_element.id)\n          .html(\"Show\")\n          .addClass(\"btn-outline-info\")\n          .removeClass(\"btn-info\");\n      }\n    }\n  }\n\n  function row_check(type, row) {\n    if ((type = \"page_break\")) {\n      return (\n        typeof row[\"text\"] !== \"undefined\" &&\n        typeof row[\"type\"] !== \"undefined\" &&\n        (row[\"text\"].toLowerCase() == \"page_break\") |\n          (row[\"type\"].toLowerCase() == \"page_break\")\n      );\n    } else if ((type = \"\")) {\n      //do nothing\n    }\n  }\n\n  // http://stackoverflow.com/questions/962802#962890\n  function shuffle(array) {\n    var tmp,\n      current,\n      top = array.length;\n    if (top)\n      while (--top) {\n        current = Math.floor(Math.random() * (top + 1));\n        tmp = array[current];\n        array[current] = array[top];\n        array[top] = tmp;\n      }\n    return array;\n  }\n\n  function shuffle_answers(row) {\n    if (\n      typeof row[\"shuffle_answers\"] !== \"undefined\" &&\n      row[\"shuffle_answers\"].toLowerCase() == \"yes\"\n    ) {\n      var answers = row[\"answers\"].split(\"|\");\n      order = shuffle([...Array(answers.length).keys()]);\n\n      var ordered_answers = order.map(function (position) {\n        return answers[position];\n      });\n      row[\"answers\"] = ordered_answers.join(\"|\");\n\n      if (row[\"values\"].indexOf(\"|\") !== -1) {\n        var values = row[\"values\"].split(\"|\");\n        var ordered_values = order.map(function (position) {\n          return values[position];\n        });\n        row[\"values\"] = ordered_values.join(\"|\");\n      }\n    }\n    return row;\n  }\n\n  function update_score() {\n    var scales = Object.keys(survey_obj.scales);\n    scales.forEach(function (scale) {\n      this_scale = survey_obj.scales[scale];\n      var questions = Object.keys(this_scale.questions);\n      var this_score = 0;\n      complete_score = true;\n\n      questions.forEach(function (row_no) {\n        var item = survey_obj.data[row_no].item_name.toLowerCase();\n        var this_response = $(\"#survey_\" + item + \"_value\").val();\n        var normal_reverse = this_scale.questions[row_no];\n\n        if (normal_reverse.indexOf(\"-\") == -1) {\n          var multiplier = parseFloat(normal_reverse.replace(\"r\", \"\"));\n          if (normal_reverse.indexOf(\"r\") == 0) {\n            //reverse the values\n\n            this_value = process_score(\n              row_no,\n              \"values\",\n              this_response,\n              item,\n              \"r\"\n            );\n          } else {\n            this_value = process_score(row_no, \"values\", this_response, item);\n          }\n        } else {\n          values_reverse = normal_reverse.split(\"-\");\n          values_col = values_reverse[0].toLowerCase();\n          normal_reverse = values_reverse[1];\n          var multiplier = parseFloat(normal_reverse.replace(\"r\", \"\"));\n\n          if (normal_reverse.indexOf(\"r\") == 0) {\n            //reverse the values\n            this_value = process_score(\n              row_no,\n              values_col,\n              this_response,\n              item,\n              \"r\"\n            );\n          } else {\n            this_value = process_score(row_no, values_col, this_response, item);\n          }\n        }\n        if (typeof this_value !== \"undefined\") {\n          this_score += multiplier * this_value;\n        } else {\n          complete_score = false;\n        }\n      });\n      if (complete_score) {\n        $(\".score_\" + scale)\n          .addClass(\"bg-success\")\n          .removeClass(\"bg-danger\")\n          .addClass(\"text-light\")\n          .prop(\"title\", \"All relevant questions have been answered\");\n      } else {\n        $(\".score_\" + scale)\n          .removeClass(\"text-success\")\n          .addClass(\"bg-danger\")\n          .addClass(\"text-light\")\n          .prop(\n            \"title\",\n            \"At least one relevant questions has NOT been answered\"\n          );\n      }\n      $(\".score_\" + scale).val(this_score);\n    });\n  }\n\n  function write(type, row) {\n    var this_html = \"\";\n    [feedback_array, feedback_color] = get_feedback(row);\n    row = shuffle_answers(row);\n    row[\"item_name\"] = row[\"item_name\"].toLowerCase();\n\n    if (type == \"checkbox_horizontal\") {\n      var options = row[\"answers\"].split(\"|\");\n      var this_table = $(\"<table>\");\n      this_row = this_table[0].insertRow();\n      for (var i = 0; i < options.length; i++) {\n        var this_cell = this_row.insertCell();\n        var this_div = $(\"<div>\");\n        this_div.addClass(\"custom-control\");\n        this_div.addClass(\"custom-checkbox\");\n        var this_input = $(\"<input>\");\n        this_input[0].type = \"checkbox\";\n        this_input[0].id = row[\"item_name\"] + i;\n        this_input[0].name = \"survey_\" + row[\"item_name\"];\n        this_input\n          .addClass(\"custom-control-input\")\n          .addClass(\"response\")\n          .addClass(row[\"this_class\"])\n          .addClass(row[\"custom-control\"])\n          .addClass(row[\"custom-checkbox\"])\n          .addClass(row[\"item_name\"] + \"_item\")\n          .addClass(\"row_\" + row[\"row_no\"]);\n        var this_label = $(\"<label>\");\n        this_label[0].htmlFor = row[\"item_name\"] + i;\n        this_label[0].innerText = options[i];\n        this_label.addClass(\"custom-control-label\");\n        this_div.append(this_input).append(this_label);\n        this_cell.innerHTML = this_div[0].outerHTML;\n      }\n\n      this_html += this_table[0].outerHTML;\n    } else if (type == \"checkbox_single\") {\n      var this_div = $(\"<div>\");\n      this_div.attr(\"data-toggle\", \"buttons\");\n      this_div.addClass(\"btn-group-toggle\");\n      var this_label = $(\"<label>\");\n      this_label.addClass(\"btn\");\n      this_label.addClass(\"btn-outline-primary\");\n      this_label.html(row[\"answers\"]);\n      var this_checkbox = $(\"<input>\");\n      this_checkbox[0].id = row[\"item_name\"];\n      this_checkbox[0].name = \"survey_\" + row[\"item_name\"].toLowerCase();\n      this_checkbox[0].type = \"checkbox\";\n      this_checkbox.attr(\"checked\", true);\n      this_checkbox\n        .addClass(\"response\")\n        .addClass(row[\"item_name\"] + \"_item row_\" + row[\"row_no\"]);\n      this_div.append(this_label);\n      this_label.append(this_checkbox);\n      this_html += this_div[0].outerHTML;\n    } else if (type == \"checkbox_vertical\") {\n      var options = row[\"answers\"].split(\"|\");\n      var values = row[\"values\"].split(\"|\");\n      for (var i = 0; i < options.length; i++) {\n        feedback_string = generate_feedback_string(\n          feedback_array,\n          i,\n          feedback_color,\n          row\n        );\n        var this_div = $(\"<div>\");\n        this_div.addClass(\"custom-control\").addClass(\"custom-checkbox\");\n        var this_checkbox = $(\"<input>\");\n        this_checkbox[0].id = row[\"item_name\"] + i;\n        this_checkbox[0].value = options[i];\n        this_checkbox[0].type = \"checkbox\";\n        this_checkbox[0].name = \"survey_\" + row[\"item_name\"].toLowerCase();\n        this_checkbox\n          .addClass(\"custom-control-input\")\n          .addClass(row[\"this_class\"])\n          .addClass(\"custom-control\")\n          .addClass(\"custom-checkbox\")\n          .addClass(\"response\")\n          .addClass(row[\"item_name\"] + \"_item_row\");\n        var this_label = $(\"<label>\");\n        this_label[0].htmlFor = row[\"item_name\"] + i;\n        this_label[0].innerHTML = options[i];\n        this_label.addClass(\"custom-control-label\");\n        this_div.append(this_checkbox).append(this_label);\n\n        this_html += this_div[0].outerHTML;\n      }\n      if (\n        typeof row[\"other\"] !== \"undefined\" &&\n        row[\"other\"].toLowerCase() == \"yes\"\n      ) {\n        var this_div = $(\"<div>\");\n        this_div.addClass(\"custom-control\").addClass(\"custom-checkbox\");\n        var this_checkbox = $(\"<input>\");\n        this_checkbox[0].id = row[\"item_name\"] + \"_other\";\n        this_checkbox[0].value = \"Other\";\n        this_checkbox[0].type = \"checkbox\";\n        this_checkbox[0].name = \"survey_\" + row[\"item_name\"].toLowerCase();\n        this_checkbox\n          .addClass(\"custom-control-input\")\n          .addClass(row[\"this_class\"])\n          .addClass(\"custom-control\")\n          .addClass(\"custom-checkbox\")\n          .addClass(\"response\")\n          .addClass(row[\"item_name\"] + \"_item_row\");\n        var this_label = $(\"<label>\");\n        this_label[0].htmlFor = row[\"item_name\"] + \"_other\";\n        this_label[0].innerHTML = \"Other\";\n        this_label.addClass(\"custom-control-label\");\n        this_div.append(this_checkbox).append(this_label);\n\n        this_html += this_div[0].outerHTML;\n\n        var text_input = $(\"<input>\");\n        text_input.addClass(\"form-control\");\n        text_input.attr(\n          \"placeholder\",\n          \"(Please specify if you selected 'Other')\"\n        );\n        text_input[0].name =\n          \"survey_\" + row[\"item_name\"].toLowerCase() + \"_other\";\n        this_html += text_input[0].outerHTML;\n      }\n    } else if (type == \"date\") {\n      var input = $(\"<input>\");\n      input\n        .addClass(\"response\")\n        .addClass(\"custom-control\")\n        .addClass(\"datepicker\")\n        .addClass(\"date\")\n        .addClass(row[\"item_name\"] + \"_item\")\n        .addClass(\"row_\" + row[\"row_no\"])\n        .attr(\"name\", \"survey_\" + row[\"item_name\"])\n        .attr(\"type\", \"text\");\n    } else if (type == \"dropdown\") {\n      var options = row[\"answers\"].split(\"|\");\n      var this_dropdown = $(\"<select>\");\n      this_dropdown\n        .addClass(\"form-select\")\n        .addClass(\"response\")\n        .addClass(\"txt-primary\")\n        .addClass(row[\"item_name\"] + \"_item\")\n        .addClass(\"row_\" + row[\"row_no\"])\n        .addClass(\"collector_button\")\n        .attr(\"name\", \"survey_\" + row[\"item_name\"])\n        .css(\"margin\", \"0px\")\n        .css(\"width\", \"auto\");\n\n      /* this will be necessary to tidy up jumbled sentences\n    if(typeof(row[\"item_name_old\"]) !== \"undefined\"){\n      this_dropdown.addClass(row[\"item_name_old\"] + \"_item\");\n    }\n    */\n\n      this_dropdown.append(\n        \"<option selected disabled hidden>-- no option selected --</option>\"\n      );\n      options.forEach(function (this_option) {\n        this_dropdown.append(\"<option>\" + this_option + \"</option>\");\n      });\n      var this_html = this_dropdown[0].outerHTML;\n    } else if (type == \"email\") {\n      var this_input = $(\"<input>\");\n      this_input\n        .addClass(\"form-control\")\n        .addClass(\"response\")\n        .addClass(row[\"item_name\"] + \"_item row_\" + row[\"row_no\"])\n        .attr(\"type\", \"email\")\n        .attr(\"name\", \"survey_\" + row[\"item_name\"]);\n    } else if (type == \"instruct\") {\n      this_html += \"<td colspan='2'>\" + row[\"text\"] + \"</td>\";\n    } else if (type == \"jumbled\") {\n      var this_td = $(\"<td>\");\n      this_td.attr(\"colspan\", 2);\n\n      var this_div = $(\"<div>\");\n      this_div\n        .addClass(\"form-inline\")\n        .addClass(\"bg-secondary\")\n        .addClass(\"text-white\")\n        .css(\"width\", \"100%\")\n        .css(\"padding\", \"20px\")\n        .css(\"margin\", \"20px\")\n        .css(\"border-radius\", \"5px\");\n\n      var question = row[\"text\"].split(\"|\");\n      questions_html = question\n        .map(function (text, index) {\n          if (index == question.length - 1) {\n            return text;\n          } else {\n            var row_x = row;\n            row_x[\"item_name_old\"] = row_x[\"item_name\"];\n            row_x[\"item_name\"] = row_x[\"item_name\"] + \"_\" + index;\n            var row_html =\n              text +\n              write(\"dropdown\", row_x).replace(\"margin: 0px\", \"margin: 5px\");\n            row_x[\"item_name\"] = row_x[\"item_name_old\"];\n            return row_html;\n          }\n        })\n        .join(\"\");\n\n      this_td.append(this_div);\n      this_div.append(questions_html);\n\n      this_html = this_td[0].outerHTML;\n    } else if (type == \"likert\") {\n      // set styles\n      if (typeof row[\"btn_width\"] == \"undefined\") {\n        row[\"btn_width\"] = \"auto\";\n      }\n      if (typeof row[\"side_width\"] == \"undefined\") {\n        var side_width = \"auto\";\n      }\n\n      // create and build these elements\n      var this_div = $(\"<div>\");\n      if (typeof row[\"side_text\"] !== \"undefined\" && row[\"side_text\"] !== \"\") {\n        side_text = row[\"side_text\"].split(\"|\");\n        side_text = side_text.map(function (this_side) {\n          var this_span = $(\"<span>\");\n          this_span\n            .css(\"width\", side_width)\n            .css(\"padding\", \"20px\")\n            .addClass(\"text-primary\")\n            .html(\"<b>\" + this_side + \"</b>\");\n          return this_span[0].outerHTML;\n        });\n      } else {\n        side_text = [\"\", \"\"];\n      }\n\n      this_div\n        .addClass(\"btn-group\")\n        .addClass(\"btn-group-toggle\")\n        .append(side_text[0])\n        .attr(\"data-togle\", \"buttons\");\n\n      var options = row[\"answers\"].split(\"|\");\n      var values = row[\"values\"].split(\"|\");\n      for (var i = 0; i < options.length; i++) {\n        var this_button = $(\"<button>\");\n        this_button\n          .attr(\"autocomplete\", \"off\")\n          .attr(\"id\", \"likert_\" + row[\"row_no\"] + \"_\" + i)\n          .attr(\"onclick\", \"likert_update(this)\")\n          .attr(\"value\", values[i])\n          .addClass(\"btn\")\n          .addClass(\"btn-outline-primary\")\n          .addClass(\"survey_btn\")\n          .addClass(row[\"item_name\"] + \"_item row_\" + row[\"row_no\"])\n          .css(\"width\", row[\"btn_width\"])\n          .html(clean_item(options[i]));\n        this_div.append(this_button);\n      }\n      this_div.append(side_text[1]);\n      this_html += this_div[0].outerHTML;\n    } else if (type == \"number\") {\n      var this_input = $(\"<input>\");\n      this_input[0].type = \"number\";\n      this_input[0].name = \"survey_\" + row[\"item_name\"];\n      this_input\n        .addClass(\"response\")\n        .addClass(\"form-control\")\n        .addClass(row[\"item_name\"] + \"_item row_\" + row[\"row_no\"]);\n      this_html += this_input[0].outerHTML;\n    } else if (type == \"para\") {\n      var this_textarea = $(\"<textarea>\");\n      this_textarea[0].name = \"survey_\" + row[\"item_name\"];\n      this_textarea\n        .addClass(row[\"item_name\"] + \"_item row_\" + row[\"row_no\"])\n        .addClass(\"response\");\n      this_textarea.css(\"width\", \"100%\").css(\"height\", \"200px\");\n      this_html += this_textarea[0].outerHTML;\n    } else if (type == \"radio_horizontal\") {\n      var options = row[\"answers\"].split(\"|\");\n      var this_table = $(\"<table>\");\n      this_row = this_table[0].insertRow();\n      for (var i = 0; i < options.length; i++) {\n        var this_cell = this_row.insertCell();\n        var this_div = $(\"<div>\");\n        this_div.addClass(\"custom-control\");\n        this_div.addClass(\"custom-radio\");\n        var this_input = $(\"<input>\");\n        this_input[0].type = \"radio\";\n        this_input[0].id = row[\"item_name\"] + i;\n        this_input[0].name = \"survey_\" + row[\"item_name\"];\n        this_input\n          .addClass(\"custom-control-input\")\n          .addClass(\"response\")\n          .addClass(row[\"this_class\"])\n          .addClass(row[\"custom-control\"])\n          .addClass(row[\"custom-radio\"])\n          .addClass(row[\"item_name\"] + \"_item\")\n          .addClass(\"row_\" + row[\"row_no\"]);\n        var this_label = $(\"<label>\");\n        this_label[0].htmlFor = row[\"item_name\"] + i;\n        this_label[0].innerText = options[i];\n        this_label.addClass(\"custom-control-label\");\n        this_div.append(this_input).append(this_label);\n        this_cell.innerHTML = this_div[0].outerHTML;\n      }\n      this_html += this_table[0].outerHTML;\n    } else if (type == \"radio_vertical\") {\n      var options = row[\"answers\"].split(\"|\");\n      var values = row[\"values\"].split(\"|\");\n      for (var i = 0; i < options.length; i++) {\n        feedback_string = generate_feedback_string(\n          feedback_array,\n          i,\n          feedback_color,\n          row\n        );\n        var this_div = $(\"<div>\");\n        this_div.addClass(\"custom-control\").addClass(\"custom-radio\");\n        var this_input = $(\"<input>\");\n        this_input[0].type = \"radio\";\n        this_input[0].id = row[\"item_name\"] + i;\n        this_input[0].value = options[i];\n        this_input[0].name = \"survey_\" + row[\"item_name\"];\n        this_input\n          .addClass(\"custom-control-input\")\n          .addClass(row[\"this_class\"])\n          .addClass(\"custom-control\")\n          .addClass(\"custom-radio\")\n          .addClass(\"response\")\n          .addClass(row[\"item_name\"] + \"_item_row_\" + row[\"row_no\"]);\n        var this_label = $(\"<label>\");\n        this_label[0].htmlFor = row[\"item_name\"] + i;\n        this_label.addClass(\"custom-control-label\");\n        this_label.html(options[i]);\n        this_div.append(this_input).append(this_label).append(feedback_string);\n        this_html += this_div[0].outerHTML;\n      }\n    } else if (type == \"text\") {\n      var this_input = $(\"<input>\");\n      this_input[0].type = \"text\";\n      this_input[0].name = \"survey_\" + row[\"item_name\"];\n      this_input\n        .addClass(\"form-control\")\n        .addClass(row[\"item_name\"] + \"_item row_\" + row[\"row_no\"])\n        .addClass(\"response\");\n      this_html += this_input[0].outerHTML;\n    }\n\n    switch (type) {\n      case \"checkbox_vertical\":\n      case \"radio_vertical\":\n        // do nothing\n        break;\n      default:\n        this_html += generate_feedback_string(\n          feedback_array,\n          0,\n          feedback_color,\n          row\n        );\n        break;\n    }\n\n    return this_html;\n  }\n\n  function write_survey(this_survey, this_id) {\n    scoring_object.update_scales(this_survey);\n    survey_html = \"<table class='table_break' id='table0'>\";\n    this_survey_object = {\n      content: [],\n      shuffle_question: [],\n      content_new_order: [],\n      shuffled_content: [],\n      shuffled_arrays: {},\n    };\n\n    survey_html += \"<tr>\";\n    for (i = 0; i < this_survey.length; i++) {\n      row = this_survey[i];\n      row_html = process_question(row, i);\n      this_survey_object.content.push(row_html[0]);\n      this_survey_object.shuffle_question.push(row_html[1]);\n    }\n\n    unique_shuffles = this_survey_object.shuffle_question.filter(\n      (v, i, a) => a.indexOf(v) == i\n    ); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\n\n    for (var i = 0; i < unique_shuffles.length; i++) {\n      if (\n        typeof unique_shuffles[i] !== \"undefined\" &&\n        unique_shuffles[i] !== \"none\" &&\n        unique_shuffles[i] !== \"\"\n      ) {\n        shuffled_content = this_survey_object.shuffle_question\n          .map(function (element, index) {\n            if (\n              typeof element !== \"undefined\" &&\n              element.toLowerCase() !== \"none\" &&\n              element.toLowerCase() == unique_shuffles[i]\n            ) {\n              return this_survey_object.content[index];\n            }\n          })\n          .filter((elm) => typeof elm !== \"undefined\");\n        new_order = shuffle(shuffled_content);\n        this_survey_object.shuffled_arrays[unique_shuffles[i]] = new_order; // add new array with dynamic name\n      }\n    }\n\n    for (var i = 0; i < this_survey_object.content.length; i++) {\n      var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(\n        this_survey_object.shuffle_question[i]\n      );\n      if (this_index !== -1) {\n        //take first item off relevant list and delete item\n        var this_item =\n          this_survey_object.shuffled_arrays[\n            Object.keys(this_survey_object.shuffled_arrays)[this_index]\n          ].shift();\n        this_survey_object.content_new_order[i] = this_item;\n      } else {\n        this_survey_object.content_new_order[i] = this_survey_object.content[i];\n      }\n    }\n\n    qs_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\n    qs_in_order += \"</tr>\";\n\n    survey_html += qs_in_order;\n    survey_html += \"</table>\";\n\n    $(\"#\" + this_id).html(survey_html);\n\n    $(\".response\").on(\"change\", function () {\n      response_check(this);\n    });\n\n    $(\"#\" + this_id).show(1000); //scroll to top\n\n    $(\".show_tab\").on(\"click\", function () {\n      if (this.className.indexOf(\"disabled\") == -1) {\n        $(\".show_tab\").removeClass(\"active\");\n        $(\".survey_page\").hide();\n        $(\"#\" + this.id.replace(\"_button\", \"\")).show();\n      } else {\n        bootbox.alert(\n          \"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\"\n        );\n      }\n    });\n  }\n\n  /*\n   * Load survey\n   */\n  current_survey = \"{{survey}}\";\n  if (typeof Phase !== \"undefined\") {\n    Phase.set_timer(function () {\n      load_survey(current_survey);\n    }, 100);\n  } else {\n    load_survey(current_survey);\n  }\n</script>\n"
  },
  "mods": {},
  "location": "jmcrscollab/msc-project/anthony_testing",
  "storage_scripts": {
    "https://nt906822.webs.act.reading.ac.uk/collector/ValidateUser.php": "https://nt906822.webs.act.reading.ac.uk/collector/StoreData_Cat_0.php"
  },
  "phasetypes": {
    "survey": "[[[LOCATION]]]../Default/DefaultPhaseTypes/survey.html"
  },
  "procs_csv": {},
  "stims_csv": {}
}